"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const m=require("react"),w=require("../form/form.cjs.js");function b(e){if(e&&e.__esModule)return e;const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,a.get?a:{enumerable:!0,get:()=>e[t]})}}return r.default=e,Object.freeze(r)}const n=b(m),i=n.createContext(null);function g({children:e,onShippingAddressChange:r,onShippingOptionChange:t}){const[a,d]=n.useState(null),{createPaymentRequest:s,payments:u}=w.useForm();if(!s)throw new Error("`createPaymentRequest()` is required when using digital wallets");return n.useEffect(()=>{const c=new AbortController,{signal:y}=c;return(async f=>{const o=u?.paymentRequest(s);if(!o)throw new Error("`paymentRequest` is required when using digital wallets");r&&o.addEventListener("afterpay_shippingaddresschanged",r),t&&o.addEventListener("afterpay_shippingoptionchanged",t);const p=await u?.afterpayClearpay(o).then(l=>f.aborted?null:(d(l),l));f.aborted&&await p?.destroy()})(y),()=>{c.abort()}},[s,u]),n.createElement(i.Provider,{value:a},e)}function v(){const e=n.useContext(i);if(e===void 0)throw new Error("`useAfterpay()` must be used within an `<AfterpayProvider>`");return e}exports.AfterpayContext=i;exports.default=g;exports.useAfterpay=v;
//# sourceMappingURL=afterpay.cjs.js.map
