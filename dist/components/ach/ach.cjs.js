"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const k=require("react"),z=require("../../contexts/form/form.cjs.js"),P=require("../../hooks/use-event-listener.cjs.js"),d=require("./ach.styles.cjs.js"),x=require("./ach.utils.cjs.js");function A(t){if(t&&t.__esModule)return t;const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const s in t)if(s!=="default"){const o=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(a,s,o.get?o:{enumerable:!0,get:()=>t[s]})}}return a.default=t,Object.freeze(a)}const e=A(k);function w({accountHolderName:t,redirectURI:a,transactionId:s,callbacks:o,buttonProps:g,children:h,svgProps:E}){const[i,v]=e.useState(()=>{}),[_,m]=e.useState(!1),{cardTokenizeResponseReceived:j,payments:p}=z.useForm(),u=e.useRef(null),S=async r=>{if(r.stopPropagation(),!i){console.warn("ACH button was clicked, but no ACH instance was found.");return}m(!0);try{const n=await i.tokenize({accountHolderName:t});if(n.status==="OK")return await j(n);let l=`Tokenization failed with status: ${n.status}`;if(n?.errors)throw l+=` and errors: ${JSON.stringify(n?.errors)}`,new Error(l);console.warn(l)}catch(n){console.error(n)}finally{m(!1)}};if(e.useEffect(()=>{const r=new AbortController,{signal:n}=r;return(async f=>{const R=await p?.ach({redirectURI:a,transactionId:s}).then(y=>{if(!f?.aborted)return v(y),y});f.aborted&&await R?.destroy()})(n),()=>{r.abort()}},[p]),o)for(const r of Object.keys(o))i?.addEventListener(x.transformPlaidEventName(r),o[r]);P.useEventListener({listener:S,type:"click",element:u,options:{passive:!0}});const{isLoading:O,...b}=g??{},c=O||!i||_;return h?e.createElement(d.PayButton,{...b,"aria-disabled":c,disabled:c,ref:u,type:"button"},h):e.createElement(d.PayButton,{...b,"aria-disabled":c,disabled:c,ref:u,type:"button"},e.createElement(d.SvgIcon,{fill:"none",height:"1em",viewBox:"0 0 36 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...E},e.createElement("rect",{fill:"url(#prefix__paint0_linear)",height:24,rx:4,width:36}),e.createElement("path",{clipRule:"evenodd",d:"M18.509 6.16a.89.89 0 00-1.018 0l-6.124 4.285a.848.848 0 00-.325.96.873.873 0 00.833.595h1.75v4.286h-1.75a.866.866 0 00-.875.857c0 .473.392.857.875.857h12.25a.866.866 0 00.875-.857.866.866 0 00-.875-.857h-1.75V12h1.75c.38 0 .717-.24.833-.596a.848.848 0 00-.324-.959L18.509 6.16zm2.116 10.126V12h-5.25v4.286h5.25zM18 7.91l3.395 2.376h-6.79L18 7.91z",fill:"#fff",fillRule:"evenodd"}),e.createElement("defs",null,e.createElement("linearGradient",{gradientUnits:"userSpaceOnUse",id:"prefix__paint0_linear",x1:36,x2:0,y1:12,y2:12},e.createElement("stop",{stopColor:"#01D09E"}),e.createElement("stop",{offset:1,stopColor:"#03E4AE"})))),e.createElement("span",null,"Pay with Direct debit (ACH)"))}exports.Ach=w;exports.default=w;
//# sourceMappingURL=ach.cjs.js.map
