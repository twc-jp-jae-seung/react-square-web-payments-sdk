"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const j=require("react"),P=require("../../contexts/form/form.cjs.js");function R(e){if(e&&e.__esModule)return e;const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,s.get?s:{enumerable:!0,get:()=>e[r]})}}return o.default=e,Object.freeze(o)}const a=R(j);function A({callbacks:e,id:o="rswps-cash-app-pay",redirectURL:r,referenceId:s,shape:l="round",size:f="medium",values:d="dark",width:m="static",...g}){const[h,q]=a.useState(),{createPaymentRequest:u,payments:p}=P.useForm(),y=a.useMemo(()=>({redirectURL:r||window.location.href,referenceId:s}),[r,s]),w=a.useMemo(()=>{const t={shape:l,size:f,values:d,width:m};return Object.keys(t).reduce((c,n)=>(t[n]!==void 0&&(c[n]=t[n]),c),{})},[l,f,d,m]);if(a.useEffect(()=>{if(!u)throw new Error("`createPaymentRequest()` is required when using digital wallets");const t=new AbortController,{signal:c}=t;let n;return(async O=>{const b=p?.paymentRequest(u);if(!b)throw new Error("`paymentRequest` is required when using digital wallets");try{n=await p?.cashAppPay(b,y).then(i=>{if(!O?.aborted)return q(i),i}),await n?.attach(`#${o}`,w)}catch(i){console.error("Initializing Cash App Pay failed",i)}})(c),()=>{t.abort(),n?.destroy()}},[u,w,y,p]),e)for(const t of Object.keys(e))h?.addEventListener(t.toLowerCase(),e[t]);return a.createElement("div",{...g,id:o})}exports.default=A;
//# sourceMappingURL=cash-app-pay.cjs.js.map
